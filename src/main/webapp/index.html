<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.2/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.2/js/plugins/piexif.min.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.2/js/plugins/sortable.min.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.2/js/plugins/purify.min.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.2/js/fileinput.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.2/themes/fas/theme.min.js"></script>
</head>
<body style="padding: 10px">
   <div>
	   <form method="post" action="/file/upload" enctype="multipart/form-data">
			  <input type="file" name = "upload_file" />
			  <button type="submit" id="save">submit</button>
	   </form>
   </div>
   <div>
	   <form>
		   <div align="center" id="myModal" style="height:200px">
		       <span class="btn btn-success fileinput-button" style="width: 600px;">
		           <div>upload</div>
		           <div>
		              <a href="/file/down/downTempFile?tempName=jxc.xlsx" class="form-control" style="border:none;">download tempile file</a>
		           </div>
		           <input type="file" name="upload_file" id="upload_file" multiple="multiple"  class="file-loading" />
		       </span>
		  </div>
	   </form>
   </div>
    
    <script type="text/javascript"> 
       $(function(){
	        $("#upload_file").fileinput({ 
	        	language: 'zh',
	            uploadUrl: "/file/upload",
	            allowedFileExtensions: ['jpg', 'png','gif','excel','xlsx','doc'],
	            overwriteInitial: false,
	            maxFileSize: 2048,
	            maxFilesNum: 10,
	            showUpload: true,
	            showCaption: true,
	            enctype: 'multipart/form-data',
	            validateInitialCount:true,
	            slugCallback: function(filename) {
	                   return filename.replace('(', '_').replace(']', '_');
	               },
	            previewFileIcon: "<i class='glyphicon glyphicon-king'></i>", 
	            msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
	        });
       });
   	    //导入文件上传完成之后的事件
   	    $("#upload_file").on("fileuploaded", function (event, data, previewId, index) {
   	        $("#myModal").modal("hide");
   	        var data = data.response.lstOrderImport;
   	        if (data == undefined) {
   	            toastr.error('文件格式类型不正确');
   	            return;
   	        }
   	    });
    </script>
    <style>
        .fileinput-button {
            position: relative;
            display: inline-block;
            overflow: hidden;
        }

        .fileinput-button input{
            position:absolute;
            right: 0px;
            top: 0px;
            opacity: 0;
            -ms-filter: 'alpha(opacity=0)';
            font-size: 100px;
        }
    </style>
</body>
</html>
